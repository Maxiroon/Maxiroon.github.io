<!DOCTYPE html>
<html>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/CSS/style.css">
<script src="/JS/JSmain.js"></script>
<title>Maxiroon Blog</title>
<link rel="icon" href="/media/favicon.ico">

<script src="/JS/template.js" defer></script>
<div id="nav"></div>
<div id="heading"></div>

<head>
  <meta charset="UTF-8">
  <title>Blog Entries</title>
  <style>
    h1 {
      text-align: center;
    }

    .blog-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin: 15px;
    }

    .blog-card {
      background-image: linear-gradient(#f00, #000);
      border: 5px solid #fff;
      border-radius: 25px;
      overflow: hidden;
      text-align: center;
      box-shadow: 0px 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }

    .blog-card hr {
        width: 80%;
        margin-left: auto;
        margin-right: auto;
        margin-top: 5px;
        margin-bottom: 5px;
    }

    .blog-card:hover {
      transform: translateY(-5px);
    }

    .blog-image {
      width: 100%;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #850000;
      color: #fff;
      font-weight: bold;
      font-size: 25px;
      object-fit: cover;
      border: 0px;
      border-radius: 0px;
    }

    .blog-card h3 {
      margin: 10px 0 5px;
      font-size: 25px;
    }

    .blog-card p {
      font-size: 14px;
      color: white;
      margin: 0 10px 10px;
      min-height: 40px;
    }

    .blog-card a {
      display: inline-block;
      margin: 10px;
      padding: 6px 12px;
      text-decoration: none;
      color: white;
      background: #e24a4a;
      border-radius: 6px;
      transition: background 0.2s;
    }

    .blog-card a:hover {
      background: #bd3535;
    }
  </style>
</head>
<body>
  <h1>My Blog</h1>
  <div class="blog-grid" id="blogGrid">
    <!-- Blog Entries go here -->
  </div>

  <script>
    const blogPosts = [
      {
        title: "Blog Page Update",
        date: "30 Aug, 2025",
        link: "25.8.30.html",
        image: ""
      },
      {
        title: "Four Year Anniversary",
        link: "25.5.27.html",
        date: "27 May, 2025",
        image: "/media/4year/01_pp.png"
      }
    ];

    const grid = document.getElementById('blogGrid');

    blogPosts.forEach(post => {
      const card = document.createElement('div');
      card.classList.add('blog-card');

      // if there's no image, show a placeholder text
      const imageHTML = post.image
        ? `<img class="blog-image" src="${post.image}" alt="${post.title}">`
        : `<div class="blog-image">NO IMAGE</div>`;

      card.innerHTML = `
        ${imageHTML}
        <h3>${post.title}</h3>
        <h6>${post.date}</h6>
        <hr>
        <p class="preview">Loading preview...</p>
        <a href="${post.link}">Read More</a>
      `;

      grid.appendChild(card);

      // Try fetching the link for a preview âœ¨
      fetch(post.link)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, "text/html");

          let paragraphs = Array.from(doc.querySelectorAll("p"))
            .map(p => p.textContent.trim())
            .filter(p => p.length > 0);

          let previewText = paragraphs.length > 0
            ? paragraphs.join(" ")
            : doc.body.textContent || "";

          previewText = previewText.replace(/\s+/g, " ").trim();

          const previewWords = previewText.split(" ").slice(0, 25).join(" ") + "...";

          card.querySelector(".preview").textContent = previewWords;
        })
        .catch(err => {
          card.querySelector(".preview").textContent = "Preview unavailable";
        });
    });
  </script>
</body>

<footer>
    <br>
    <center>
        <div id="footer"></div>
    </center>
    <br>
</footer>

</html>
